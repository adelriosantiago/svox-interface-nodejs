<!DOCTYPE html>
<html>
	<head>
		<title>Node.js Text to Speech API</title>
		<link rel='stylesheet' href='/stylesheets/style.css' />
		<style>
			body {
			  padding: 50px;
			  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
			}
			a {
			  color: #00B7FF;
			}
		</style>
	</head>
	<body>
		<h1>SVOX Text to Speech interface in Node.js</h1>
		<div>
			<p>Language:</p>
			<select id='language_selector'>
				<option value="en-US">en-US</option>
				<option value="en-GB">en-GB</option>
				<option value="es-ES">es-ES</option>
				<option value="it-IT">it-IT</option>
				<option value="de-DE">de-DE</option>
				<option value="fr-FR">fr-FR</option>
			</select>
		</div>
		<br/>
		<div>
			<p>Text to convert:</p>			
			<input id="text_to_convert" type="text" value="Good morning"/>
			<p style='font-size: 0.8em; color: gray;'><span>Hint: </span><span id='hintbox'>Hello world</span></p>
		</div>
		<br/>
		<div>
			<p>URL call:</p>
			<a id='api_call' href="#" target="_blank">#</a>
			<p id='err_max_chars' style='display: none;'>Error: String contains more than 250 characters</p>
			<p id='err_special_chars' style='display: none;'>Error: String contains special characters</p>
		</div>
		<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
		<script>
			var lang_hints = {
				'en-US' : 'Good morning',
				'en-GB' : 'Good morning',
				'es-ES' : 'Buenos dias',
				'it-IT' : 'Buongiorno',
				'de-DE' : 'Guten Morgen',
				'fr-FR' : 'Bonjour'
			};
			
			function updateApiCall() {
				var hostname = '<%= hostname %>';
				var lang = $('#language_selector').val();				
				var text = $('#text_to_convert').val();
				var callString = 'http://' + hostname + "/api/" + lang + "?text=" + text;
				$('#api_call').text(callString);
				$('#api_call').attr('href', callString);
				$('#hintbox').text(lang_hints[lang]);

				//Error advise
				if (text.length > 250) $('#err_max_chars').show(); else $('#err_max_chars').hide();
				if (/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi.test(text)) $('#err_special_chars').show(); else $('#err_special_chars').hide();
			}			
			$('#language_selector').change(function() {
				updateApiCall();
			});
			$('#text_to_convert').keyup(function() {
				updateApiCall();
			});
			updateApiCall();
		</script>
	</body>
</html>
